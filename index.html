<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Apple Trivia Battle</title>
<style>
:root {
  --bg-color: #f2f2f7;
  --text-color: #111;
  --box-bg: rgba(255,255,255,0.6);
  --choice-bg: rgba(255,255,255,0.7);
}
body.dark {
  --bg-color: #111;
  --text-color: #f2f2f7;
  --box-bg: rgba(20,20,20,0.7);
  --choice-bg: rgba(40,40,40,0.8);
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial;
  background: var(--bg-color);
  color: var(--text-color);
  margin: 0;
  padding: 20px;
  text-align: center;
  transition: background 0.3s, color 0.3s;
}

h1 {
  font-size: 3rem;
  backdrop-filter: blur(20px);
  padding: 10px;
  border-radius: 20px;
  animation: pop 0.5s ease;
}
@keyframes pop { 0% { transform: scale(.6); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

.question-box {
  background: var(--box-bg);
  backdrop-filter: blur(25px) saturate(180%);
  padding: 25px;
  margin: 20px auto;
  max-width: 650px;
  border-radius: 25px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  font-size: 1.4rem;
  animation: fadeIn .4s ease;
  transition: background 0.3s;
}
@keyframes fadeIn { from {opacity:0;} to {opacity:1;} }

.choice {
  background: var(--choice-bg);
  backdrop-filter: blur(20px);
  border: 1px solid #ddd;
  color: var(--text-color);
  padding: 12px;
  margin: 12px auto;
  max-width: 300px;
  border-radius: 14px;
  cursor: pointer;
  font-size: 1.1rem;
  transition: transform .15s, background .3s, color .3s;
}
.choice:hover { transform: scale(1.05); background: white; }

.btn {
  background: black;
  color: white;
  padding: 12px 22px;
  border-radius: 14px;
  cursor: pointer;
  margin: 10px;
  font-size: 1rem;
  transition: .2s;
}
.btn:hover { background: #333; }

#secretTrigger {
  position: fixed;
  bottom: 10px;
  right: 10px;
  width: 30px;
  height: 30px;
  opacity: 0.01;
  cursor: pointer;
}
#toggles {
  position: fixed;
  top: 20px;
  right: 20px;
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}
</style>
</head>
<body>
<h1 id="title">üçé Apple Trivia Battle</h1>

<audio id="correctSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
<audio id="wrongSound" src="https://actions.google.com/sounds/v1/cartoon/cartoon_boing.ogg"></audio>
<canvas id="confettiCanvas" style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none;"></canvas>

<div id="toggles">
  <label><input type="checkbox" id="soundToggle" checked> Sounds</label>
  <label><input type="checkbox" id="darkToggle"> Dark Mode</label>
  <label>Language: <select id="languageSelect"></select></label>
</div>

<div id="game">
  <div class="question-box" id="questionBox">Press Start to begin!</div>
  <div id="choices"></div>
  <div id="scoreDisplay" style="margin-top:10px; font-size:1.2rem;"></div>
  <button id="startBtn" class="btn">Start</button>
</div>

<div id="secretTrigger" title="Shhh"></div>

<script>
const questionsByLang = {
  en: { normal: [/* English questions */], secret: [/* English secret */], ui:{start:"Start",score:"Score"} },
  es: { normal: [/* Spanish */], secret: [/* Spanish secret */], ui:{start:"Comenzar",score:"Puntuaci√≥n"} },
  fr: { normal: [/* French */], secret: [/* French secret */], ui:{start:"D√©marrer",score:"Score"} },
  de: { normal: [/* German */], secret: [/* German secret */], ui:{start:"Starten",score:"Punktzahl"} },
  ar: {
    normal: [
      {q:"ŸÅŸä ÿ£Ÿä ÿπÿßŸÖ ÿ™ÿ£ÿ≥ÿ≥ÿ™ ÿ¥ÿ±ŸÉÿ© ÿ£ÿ®ŸÑÿü", c:["1976","1980","1999","2007"], a:0},
      {q:"ŸÖŸÜ ÿ¥ÿßÿ±ŸÉ ÿ≥ÿ™ŸäŸÅ ÿ¨Ÿàÿ®ÿ≤ ŸÅŸä ÿ™ÿ£ÿ≥Ÿäÿ≥ ÿ£ÿ®ŸÑÿü", c:["ÿ®ŸäŸÑ ÿ∫Ÿäÿ™ÿ≥","ÿ≥ÿ™ŸäŸÅ Ÿàÿ≤ŸÜŸäÿßŸÉ","ÿ™ŸäŸÖ ŸÉŸàŸÉ","ŸÖÿßÿ±ŸÉ ÿ≤ŸàŸÉÿ±ÿ®Ÿäÿ±ÿ∫"], a:1}
    ],
    secret: [
      {q:"ŸÖÿß ŸáŸà ÿ¥ÿπÿßÿ± ÿ£ÿ®ŸÑÿü", c:["ÿ™ŸÅÿßÿ≠ÿ©","ŸÖŸàÿ≤ÿ©","ÿ®ÿ±ÿ™ŸÇÿßŸÑÿ©","ÿ£ŸÜÿßŸÜÿßÿ≥"], a:0}
    ],
    ui: { start:"ÿßÿ®ÿØÿ£", score:"ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ©" }
  }
};

let index=0, currentSet=[], correctCount=0, soundEnabled=true, currentLang='en';

const languageSelect = document.getElementById('languageSelect');
Object.keys(questionsByLang).forEach(lang=>{
  const opt=document.createElement('option'); opt.value=lang; opt.textContent=lang.toUpperCase(); languageSelect.appendChild(opt);
});

languageSelect.addEventListener('change', function(){
  currentLang=this.value;
  document.documentElement.lang=currentLang;
  document.getElementById('startBtn').textContent=questionsByLang[currentLang].ui.start;
  updateScore();
});

function startNormal(){ index=0; currentSet=questionsByLang[currentLang].normal; correctCount=0; updateScore(); nextQuestion(); }
function startSecret(){ index=0; currentSet=questionsByLang[currentLang].secret; correctCount=0; updateScore(); nextQuestion(); }

function nextQuestion(){
  const box=document.getElementById("questionBox"), choicesDiv=document.getElementById("choices");
  if(index>=currentSet.length){ box.textContent=`üéâ ${questionsByLang[currentLang].ui.score}: ${correctCount} / ${currentSet.length}`; choicesDiv.innerHTML=""; return; }
  const q=currentSet[index]; box.textContent=q.q; choicesDiv.innerHTML="";
  q.c.forEach((choice,i)=>{ const btn=document.createElement("div"); btn.className="choice"; btn.textContent=choice; btn.onclick=()=>handleAnswer(i===q.a); choicesDiv.appendChild(btn); });
}

function handleAnswer(correct){ if(correct){ correctCount++; if(soundEnabled) playCorrect(); startConfetti(); } else { if(soundEnabled) playWrong(); } updateScore(); index++; setTimeout(nextQuestion,400); }
function updateScore(){ document.getElementById("scoreDisplay").textContent=`${questionsByLang[currentLang].ui.score}: ${correctCount} / ${currentSet.length}`; }
function playCorrect(){ if(soundEnabled) document.getElementById("correctSound").play(); }
function playWrong(){ if(soundEnabled) document.getElementById("wrongSound").play(); }
document.getElementById("secretTrigger").addEventListener('click', startSecret);
document.getElementById("soundToggle").addEventListener('change', function(){ soundEnabled=this.checked; });
document.getElementById("darkToggle").addEventListener('change', function(){ document.body.classList.toggle('dark', this.checked); });
document.getElementById("startBtn").addEventListener('click', startNormal);

// Confetti code same as before
const canvas=document.getElementById("confettiCanvas"), ctx=canvas.getContext("2d"); canvas.width=window.innerWidth; canvas.height=window.innerHeight;
function random(min,max){return Math.random()*(max-min)+min;}
let confettiParticles=[];
function startConfetti(){ for(let i=0;i<150;i++){ confettiParticles.push({x:random(0,canvas.width),y:random(-50,-10),r:random(2,6),s:random(1,4),c:`hsl(${random(0,360)},100%,50%)`}); } animateConfetti(); }
function animateConfetti(){ ctx.clearRect(0,0,canvas.width,canvas.height); confettiParticles.forEach(p=>{p.y+=p.s;ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fillStyle=p.c;ctx.fill();}); confettiParticles=confettiParticles.filter(p=>p.y<canvas.height); if(confettiParticles.length>0) requestAnimationFrame(animateConfetti); }
</script>
</body>
</html>
